import{a as F}from"./formatters-Bnv68_Nh.js";import{_ as M}from"./TablePagination.vue_vue_type_script_setup_true_lang-DuVOr7Od.js";import{_ as O}from"./AppTextField.vue_vue_type_script_setup_true_lang-DPK1Y85R.js";import{_ as Q}from"./AppSelect.vue_vue_type_script_setup_true_lang-BTRu3LOL.js";import{u as W}from"./useApi-CfuHfgDo.js";import{c as X}from"./createUrl-BBEOOUNV.js";import{$ as j}from"./api-7bxxJisY.js";import{d as G,r as d,bb as J,X as T,g as k,l as K,m as s,f as o,a as U,o as f,b as i,t as c,e as n,aW as m,ai as Y,$ as x,c as A,v as l,q as Z}from"./index-9shWMfiu.js";import{V as tt,a as et,c as at}from"./VCard-TEzo--XU.js";import{V as ot}from"./VCardText-BFYFy1S_.js";import{V as it}from"./form-Ugpf33Uc.js";import{V as st}from"./VSpacer-C4_ZCgq9.js";import{V as nt}from"./VDivider-DXGQ3o8d.js";import{V as lt}from"./VDataTableServer-D7M8lBOl.js";import{V as rt}from"./VChip-CUIUTs-N.js";import{V as N}from"./VAvatar-DsoZ4-87.js";import{V as ct}from"./VImg-WmgQc1Qe.js";import{V as pt}from"./VTooltip-DJUw98bq.js";/* empty css                                                                        */import{_ as dt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./helpers-BGv4x_9E.js";import"./VPagination-Dm4asVKJ.js";import"./VTextField-DpSkZjVM.js";/* empty css                   */import"./VCounter-CQvQBlb4.js";import"./transition-CcV501yt.js";import"./VField-q0vLmRHc.js";import"./easing-Bybner-F.js";import"./VInput-DHdE5SuR.js";import"./forwardRefs-C-GTDzx5.js";import"./index-DsO7eA3h.js";import"./VSelect-DC24zlSS.js";import"./VList-D1Bebk8I.js";import"./ssrBoot-Cnkq7w8O.js";import"./dialog-transition-C-DrjbpX.js";import"./VMenu-rFDaxQJU.js";import"./VOverlay-D2PG8HFe.js";import"./delay-K4KdXTOh.js";import"./lazy-CbaOrP11.js";import"./scopeId-BPpLRkmM.js";import"./VCheckboxBtn-CPPcuKj4.js";import"./VSelectionControl-BbfzR8HO.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VDataTable-kSKQkQsq.js";import"./VTable-D4OaKXPj.js";import"./filter-Dl6hbOZ6.js";import"./VSlideGroup-Bur6ekQ-.js";const mt={class:"d-flex gap-2"},ut={class:"d-flex align-end flex-wrap gap-4"},vt={class:"invoice-list-search"},ft={class:"text-body-1"},_t={class:"mb-0"},bt={class:"mb-0"},Vt={class:"mb-0"},xt={class:"d-flex align-center"},gt={key:1},yt={class:"d-flex flex-column"},ht={class:"text-body-2"},kt={key:1,class:"text-body-1 text-high-emphasis"},wt=G({__name:"billing-history",async setup(It){let _,w;const b=d(""),V=d(),g=d([]),r=d(10),p=d(1),I=d(),S=d(),z=a=>{var e,v;I.value=(e=a.sortBy[0])==null?void 0:e.key,S.value=(v=a.sortBy[0])==null?void 0:v.order},E=[{title:"#",key:"id"},{title:"Status",key:"status",sortable:!1},{title:"Client",key:"client"},{title:"Total",key:"total"},{title:"Issued Date",key:"date"},{title:"Balance",key:"balance"},{title:"Actions",key:"actions",sortable:!1}],{data:B,execute:L}=([_,w]=J(()=>W(X("/apps/invoice",{query:{q:b,status:V,itemsPerPage:r,page:p,sortBy:I,orderBy:S}}))),_=await _,w(),_),D=T(()=>{var a;return(a=B.value)==null?void 0:a.invoices}),P=T(()=>{var a;return(a=B.value)==null?void 0:a.totalInvoices}),u=(a,e)=>a===e?{status:"Unpaid",chip:{color:"error"}}:a===0?{status:"Paid",chip:{color:"success"}}:{status:a,chip:{variant:"text"}},y=a=>a==="Partial Payment"?{variant:"warning",icon:"bx-pie-chart-alt"}:a==="Paid"?{variant:"success",icon:"bx-check"}:a==="Downloaded"?{variant:"info",icon:"bx-down-arrow-alt"}:a==="Draft"?{variant:"primary",icon:"bx-folder"}:a==="Sent"?{variant:"secondary",icon:"bx-envelope"}:a==="Past Due"?{variant:"error",icon:"bx-error-circle"}:{variant:"secondary",icon:"bx-x"},R=async a=>{await j(`/apps/invoice/${a}`,{method:"DELETE"}),L()};return(a,e)=>{const v=Q,q=O,C=U("RouterLink"),h=U("IconBtn"),H=M;return s(D)?(f(),k(tt,{key:0,id:"invoice-list"},{default:o(()=>[i(et,null,{default:o(()=>[i(at,null,{default:o(()=>e[7]||(e[7]=[c(" Billing History ")])),_:1,__:[7]})]),_:1}),i(ot,{class:"d-flex align-center flex-wrap gap-4 pt-6"},{default:o(()=>[n("div",mt,[i(it,null,{default:o(()=>e[8]||(e[8]=[c("Show")])),_:1,__:[8]}),i(v,{modelValue:s(r),"onUpdate:modelValue":e[0]||(e[0]=t=>m(r)?r.value=t:null),items:[5,10,20,25,50]},null,8,["modelValue"])]),i(Y,{to:{name:"apps-invoice-add"},"prepend-icon":"bx-plus"},{default:o(()=>e[9]||(e[9]=[c(" Create invoice ")])),_:1,__:[9]}),i(st),n("div",ut,[n("div",vt,[i(q,{modelValue:s(b),"onUpdate:modelValue":e[1]||(e[1]=t=>m(b)?b.value=t:null),placeholder:"Search Invoice"},null,8,["modelValue"])]),n("div",null,[i(v,{modelValue:s(V),"onUpdate:modelValue":e[2]||(e[2]=t=>m(V)?V.value=t:null),items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"],"clear-icon":"bx-x",clearable:"",placeholder:"Invoice Status",style:{"inline-size":"10rem"}},null,8,["modelValue"])])])]),_:1}),i(nt),i(lt,{modelValue:s(g),"onUpdate:modelValue":e[4]||(e[4]=t=>m(g)?g.value=t:null),"items-per-page":s(r),"onUpdate:itemsPerPage":e[5]||(e[5]=t=>m(r)?r.value=t:null),page:s(p),"onUpdate:page":e[6]||(e[6]=t=>m(p)?p.value=t:null),headers:E,items:s(D),"items-length":s(P),class:"text-no-wrap","show-select":"","onUpdate:options":z},{"item.id":o(({item:t})=>[n("div",ft,[i(C,{to:{name:"apps-invoice-preview-id",params:{id:t.id}}},{default:o(()=>[c(" #"+l(t.id),1)]),_:2},1032,["to"])])]),"item.status":o(({item:t})=>[i(pt,null,{activator:o(({props:$})=>[i(N,Z({color:y(t.invoiceStatus).variant,size:28},$,{variant:"tonal"}),{default:o(()=>[i(x,{icon:y(t.invoiceStatus).icon,size:"16"},null,8,["icon"])]),_:2},1040,["color"])]),default:o(()=>[n("p",_t,l(t.invoiceStatus),1),n("p",bt," Balance: "+l(t.balance),1),n("p",Vt," Due date: "+l(t.dueDate),1)]),_:2},1024)]),"item.client":o(({item:t})=>[n("div",xt,[i(N,{color:t.avatar.length?void 0:y(t.invoiceStatus).variant,variant:t.avatar.length?void 0:"tonal",class:"me-3",size:"34"},{default:o(()=>[t.avatar.length?(f(),k(ct,{key:0,src:t.avatar},null,8,["src"])):(f(),A("span",gt,l(("avatarText"in a?a.avatarText:s(F))(t.client.name)),1))]),_:2},1032,["color","variant"]),n("div",yt,[i(C,{to:{name:"pages-user-profile-tab",params:{tab:"profile"}},class:"font-weight-medium mb-0 text-link",style:{"line-height":"1.375rem"}},{default:o(()=>[c(l(t.client.name),1)]),_:2},1024),n("span",ht,l(t.client.companyEmail),1)])])]),"item.total":o(({item:t})=>[c(" $"+l(t.total),1)]),"item.date":o(({item:t})=>[c(l(t.issuedDate),1)]),"item.balance":o(({item:t})=>[typeof u(t.balance,t.total).status=="string"?(f(),k(rt,{key:0,color:u(t.balance,t.total).chip.color,label:"",size:"small"},{default:o(()=>[c(l(u(t.balance,t.total).status),1)]),_:2},1032,["color"])):(f(),A("div",kt,l(Number(u(t.balance,t.total).status)>0?`$${u(t.balance,t.total).status}`:`-$${Math.abs(Number(u(t.balance,t.total).status))}`),1))]),"item.actions":o(({item:t})=>[i(h,{onClick:$=>R(t.id)},{default:o(()=>[i(x,{icon:"bx-trash"})]),_:2},1032,["onClick"]),i(h,{to:{name:"apps-invoice-preview-id",params:{id:t.id}}},{default:o(()=>[i(x,{icon:"bx-show"})]),_:2},1032,["to"]),i(h,null,{default:o(()=>[i(x,{icon:"bx-dots-vertical-rounded"})]),_:1})]),bottom:o(()=>[i(H,{page:s(p),"onUpdate:page":e[3]||(e[3]=t=>m(p)?p.value=t:null),"items-per-page":s(r),"total-items":s(P)},null,8,["page","items-per-page","total-items"])]),_:1},8,["modelValue","items-per-page","page","items","items-length"])]),_:1})):K("",!0)}}}),ge=dt(wt,[["__scopeId","data-v-6000b3be"]]);export{ge as default};
