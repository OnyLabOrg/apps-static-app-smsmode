import{_ as te}from"./AppTextField.vue_vue_type_script_setup_true_lang-DPK1Y85R.js";import{_ as de}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-Chf2YTDt.js";import{V as me}from"./VDialog-ZGhGgDwJ.js";import{V as z}from"./VCard-TEzo--XU.js";import{V as T}from"./VCardText-BFYFy1S_.js";import{V as ce}from"./VForm-BaPHDZ1U.js";import{V as pe}from"./VTable-D4OaKXPj.js";import{V as I}from"./VCheckbox-2T2-qpLz.js";import{d as q,r as p,X as F,w as N,g as B,o as _,f as t,b as e,e as a,v as U,m as i,aW as b,c as A,F as E,i as X,ai as O,t as $,a as H,l as Q,$ as S,b0 as o,bb as fe}from"./index-9shWMfiu.js";import{G as ve}from"./girl-using-laptop-Zx2hieO9.js";import{a as M,V as J}from"./VRow-Dfw8lAvI.js";import{V as _e}from"./VSpacer-C4_ZCgq9.js";import{V as j}from"./VAvatar-DsoZ4-87.js";import{a as ge}from"./formatters-Bnv68_Nh.js";import{_ as xe}from"./TablePagination.vue_vue_type_script_setup_true_lang-DuVOr7Od.js";import{_ as be}from"./AppSelect.vue_vue_type_script_setup_true_lang-BTRu3LOL.js";import{_ as Ve}from"./AddNewUserDrawer.vue_vue_type_script_setup_true_lang-UNJT1amd.js";import{u as we}from"./useApi-CfuHfgDo.js";import{c as ye}from"./createUrl-BBEOOUNV.js";import{$ as Y}from"./api-7bxxJisY.js";import{V as he}from"./VDivider-DXGQ3o8d.js";import{V as Ue}from"./VDataTableServer-D7M8lBOl.js";import{V as ke}from"./VMenu-rFDaxQJU.js";import{V as Ce,a as Z,b as ee}from"./VList-D1Bebk8I.js";import{V as $e}from"./VChip-CUIUTs-N.js";import{V as De}from"./VImg-WmgQc1Qe.js";import"./VTextField-DpSkZjVM.js";/* empty css                   */import"./VCounter-CQvQBlb4.js";import"./transition-CcV501yt.js";import"./VField-q0vLmRHc.js";import"./form-Ugpf33Uc.js";import"./easing-Bybner-F.js";import"./VInput-DHdE5SuR.js";import"./forwardRefs-C-GTDzx5.js";import"./index-DsO7eA3h.js";import"./VOverlay-D2PG8HFe.js";import"./delay-K4KdXTOh.js";import"./lazy-CbaOrP11.js";import"./scopeId-BPpLRkmM.js";import"./dialog-transition-C-DrjbpX.js";import"./VCheckboxBtn-CPPcuKj4.js";import"./VSelectionControl-BbfzR8HO.js";/* empty css              */import"./helpers-BGv4x_9E.js";import"./VPagination-Dm4asVKJ.js";import"./VSelect-DC24zlSS.js";import"./validators-BJEf8OaU.js";import"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-WiCOEyE-.js";import"./vue3-perfect-scrollbar-bcaFEaIC.js";import"./VNavigationDrawer-Dm581tWB.js";import"./ssrBoot-Cnkq7w8O.js";import"./index-CvOPxmL5.js";import"./VDataTable-kSKQkQsq.js";import"./filter-Dl6hbOZ6.js";import"./VSlideGroup-Bur6ekQ-.js";const Pe={class:"text-h4 text-center mb-2"},Re={colspan:"3"},Ae={class:"d-flex justify-end"},Me={class:"text-h6"},Se={class:"d-flex justify-end"},Be={class:"d-flex justify-end"},Ee={class:"d-flex justify-end"},Te={class:"d-flex align-center justify-center gap-4"},Le=q({__name:"AddEditRoleDialog",props:{rolePermissions:{default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","update:rolePermissions"],setup(L,{emit:k}){const m=L,V=k,c=p([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),v=p(!1),y=p(""),n=p(),w=F(()=>{let d=0;return c.value.forEach(r=>{Object.entries(r).forEach(([C,D])=>{C!=="name"&&D&&d++})}),d}),h=F(()=>w.value>0&&w.value<c.value.length*3);N(v,d=>{c.value=c.value.map(r=>({...r,read:d,write:d,create:d}))}),N(()=>h,()=>{h.value||(v.value=!1)}),N(()=>c,()=>{w.value===c.value.length*3&&(v.value=!0)},{deep:!0}),N(()=>m,()=>{m.rolePermissions&&m.rolePermissions.permissions.length&&(y.value=m.rolePermissions.name,c.value=c.value.map(d=>{var C;const r=(C=m.rolePermissions)==null?void 0:C.permissions.find(D=>D.name===d.name);return r?{...d,...r}:d}))});const u=()=>{var r;const d={name:y.value,permissions:c.value};V("update:rolePermissions",d),V("update:isDialogVisible",!1),v.value=!1,(r=n.value)==null||r.reset()},g=()=>{var d;V("update:isDialogVisible",!1),v.value=!1,(d=n.value)==null||d.reset()};return(d,r)=>{const C=de,D=te;return _(),B(me,{width:d.$vuetify.display.smAndDown?"auto":900,"model-value":m.isDialogVisible,"onUpdate:modelValue":g},{default:t(()=>[e(C,{onClick:g}),e(z,{class:"pa-sm-10 pa-2"},{default:t(()=>[e(T,null,{default:t(()=>[a("h4",Pe,U(m.rolePermissions.name?"Edit":"Add New")+" Role ",1),r[7]||(r[7]=a("p",{class:"text-body-1 text-center mb-6"}," Set Role Permissions ",-1)),e(i(ce),{ref_key:"refPermissionForm",ref:n},{default:t(()=>[e(D,{modelValue:i(y),"onUpdate:modelValue":r[0]||(r[0]=f=>b(y)?y.value=f:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),r[6]||(r[6]=a("h5",{class:"text-h5 my-6"}," Role Permissions ",-1)),e(pe,{class:"permission-table text-no-wrap mb-6"},{default:t(()=>[a("tr",null,[r[3]||(r[3]=a("td",null,[a("h6",{class:"text-h6"}," Administrator Access ")],-1)),a("td",Re,[a("div",Ae,[e(I,{modelValue:i(v),"onUpdate:modelValue":r[1]||(r[1]=f=>b(v)?v.value=f:null),indeterminate:i(h),"onUpdate:indeterminate":r[2]||(r[2]=f=>b(h)?h.value=f:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(_(!0),A(E,null,X(i(c),f=>(_(),A("tr",{key:f.name},[a("td",null,[a("h6",Me,U(f.name),1)]),a("td",null,[a("div",Se,[e(I,{modelValue:f.read,"onUpdate:modelValue":P=>f.read=P,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",Be,[e(I,{modelValue:f.write,"onUpdate:modelValue":P=>f.write=P,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",Ee,[e(I,{modelValue:f.create,"onUpdate:modelValue":P=>f.create=P,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),a("div",Te,[e(O,{onClick:u},{default:t(()=>r[4]||(r[4]=[$(" Submit ")])),_:1,__:[4]}),e(O,{color:"secondary",variant:"tonal",onClick:g},{default:t(()=>r[5]||(r[5]=[$(" Cancel ")])),_:1,__:[5]})])]),_:1,__:[6]},512)]),_:1,__:[7]})]),_:1})]),_:1},8,["width","model-value"])}}}),Ie={class:"text-body-1"},Ne={class:"v-avatar-group"},je={class:"d-flex justify-space-between align-center"},ze={class:"text-h5 mb-1"},Fe={class:"d-flex align-center"},Oe=["onClick"],qe=["src"],Ge=q({__name:"RoleCards",setup(L){const k=p([{role:"Administrator",users:[o,o,o,o],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[o,o,o,o,o,o,o],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[o,o,o,o,o],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[o,o,o,o,o,o],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[o,o,o,o,o,o,o,o,o,o],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),m=p(!1),V=p(),c=p(!1),v=y=>{m.value=!0,V.value=y};return(y,n)=>{const w=H("IconBtn"),h=Le;return _(),A(E,null,[e(J,null,{default:t(()=>[(_(!0),A(E,null,X(i(k),u=>(_(),B(M,{key:u.role,cols:"12",lg:"4",sm:"6"},{default:t(()=>[e(z,null,{default:t(()=>[e(T,{class:"d-flex align-center pb-4"},{default:t(()=>[a("div",Ie," Total "+U(u.users.length)+" users ",1),e(_e),a("div",Ne,[(_(!0),A(E,null,X(u.users,(g,d)=>(_(),A(E,{key:g},[u.users.length>4&&u.users.length!==4&&d<3?(_(),B(j,{key:0,image:g},null,8,["image"])):Q("",!0),u.users.length===4?(_(),B(j,{key:1,image:g},null,8,["image"])):Q("",!0)],64))),128)),u.users.length>4?(_(),B(j,{key:0,color:y.$vuetify.theme.current.dark?"#373B50":"#EEEDF0"},{default:t(()=>[a("span",null," +"+U(u.users.length-3),1)]),_:2},1032,["color"])):Q("",!0)])]),_:2},1024),e(T,null,{default:t(()=>[a("div",je,[a("div",null,[a("h5",ze,U(u.role),1),a("div",Fe,[a("a",{href:"javascript:void(0)",onClick:g=>v(u.details)}," Edit Role ",8,Oe)])]),e(w,{class:"align-self-end"},{default:t(()=>[e(S,{class:"text-disabled",icon:"bx-copy"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(M,{cols:"12",lg:"4",sm:"6"},{default:t(()=>[e(z,{ripple:!1,class:"h-100"},{default:t(()=>[e(J,{class:"h-100","no-gutters":""},{default:t(()=>[e(M,{class:"d-flex flex-column justify-end align-center mt-5",cols:"6"},{default:t(()=>[a("img",{src:i(ve),width:"105"},null,8,qe)]),_:1}),e(M,{cols:"6"},{default:t(()=>[e(T,{class:"d-flex flex-column align-end justify-end gap-4"},{default:t(()=>[e(O,{size:"small",onClick:n[0]||(n[0]=u=>c.value=!0)},{default:t(()=>n[4]||(n[4]=[$(" Add New Role ")])),_:1,__:[4]}),n[5]||(n[5]=a("div",{class:"text-end"},[$(" Add new role,"),a("br"),$(" if it doesn't exist. ")],-1))]),_:1,__:[5]})]),_:1})]),_:1})]),_:1}),e(h,{"is-dialog-visible":i(c),"onUpdate:isDialogVisible":n[1]||(n[1]=u=>b(c)?c.value=u:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(h,{"is-dialog-visible":i(m),"onUpdate:isDialogVisible":n[2]||(n[2]=u=>b(m)?m.value=u:null),"role-permissions":i(V),"onUpdate:rolePermissions":n[3]||(n[3]=u=>b(V)?V.value=u:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}}),We={class:"d-flex align-start flex-column flex-sm-row flex-wrap gap-4"},Qe={style:{"inline-size":"15.625rem"}},Xe={style:{"inline-size":"9.375rem"}},He={style:{"inline-size":"9.375rem"}},Je={class:"d-flex align-center gap-x-4"},Ke={key:1},Ye={class:"d-flex flex-column"},Ze={class:"text-base"},et={class:"text-sm"},tt={class:"d-flex align-center gap-x-2"},at={class:"text-capitalize text-high-emphasis text-body-1"},lt={class:"text-body-1 text-high-emphasis text-capitalize"},st=q({__name:"UserList",async setup(L){let k,m;const V=p(""),c=p(),v=p(),y=p(),n=p(10),w=p(1),h=p(),u=p(),g=p([]),d=x=>{var s,R;h.value=(s=x.sortBy[0])==null?void 0:s.key,u.value=(R=x.sortBy[0])==null?void 0:R.order},r=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Billing",key:"billing"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:C,execute:D}=([k,m]=fe(()=>we(ye("/apps/users",{query:{q:V,status:y,plan:v,role:c,itemsPerPage:n,page:w,sortBy:h,orderBy:u}}))),k=await k,m(),k),f=F(()=>C.value.users),P=F(()=>C.value.totalUsers),ae=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],le=[{title:"Company",value:"company"},{title:"Team",value:"team"},{title:"Basic",value:"basic"},{title:"Enterprise",value:"enterprise"}],G=x=>{const s=x.toLowerCase();return s==="subscriber"?{color:"success",icon:"bx-user"}:s==="admin"?{color:"primary",icon:"bx-crown"}:s==="maintainer"?{color:"info",icon:"bx-pie-chart-alt"}:s==="editor"?{color:"warning",icon:"bx-edit"}:s==="author"?{color:"error",icon:"bx-desktop"}:{color:"success",icon:"bx-user"}},se=x=>{const s=x.toLowerCase();return s==="pending"?"warning":s==="active"?"success":s==="inactive"?"secondary":"primary"},W=p(!1),oe=async x=>{await Y("/apps/users",{method:"POST",body:x}),D()},re=async x=>{await Y(`/apps/users/${x}`,{method:"DELETE"});const s=g.value.findIndex(R=>R===x);s!==-1&&g.value.splice(s,1),D()};return(x,s)=>{const R=be,ne=te,ie=H("RouterLink"),K=H("IconBtn"),ue=xe;return _(),A("section",null,[e(z,null,{default:t(()=>[e(T,{class:"d-flex flex-md-row flex-column justify-space-between gap-4"},{default:t(()=>[e(R,{"model-value":i(n),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":s[0]||(s[0]=l=>n.value=parseInt(l,10))},null,8,["model-value"]),a("div",We,[a("div",Qe,[e(ne,{modelValue:i(V),"onUpdate:modelValue":s[1]||(s[1]=l=>b(V)?V.value=l:null),placeholder:"Search User"},null,8,["modelValue"])]),a("div",Xe,[e(R,{modelValue:i(c),"onUpdate:modelValue":s[2]||(s[2]=l=>b(c)?c.value=l:null),placeholder:"Select Role",items:ae,clearable:"","clear-icon":"bx-x"},null,8,["modelValue"])]),a("div",He,[e(R,{modelValue:i(v),"onUpdate:modelValue":s[3]||(s[3]=l=>b(v)?v.value=l:null),placeholder:"Select Plan",items:le,clearable:"","clear-icon":"bx-x"},null,8,["modelValue"])])])]),_:1}),e(he),e(Ue,{"items-per-page":i(n),"onUpdate:itemsPerPage":s[5]||(s[5]=l=>b(n)?n.value=l:null),"model-value":i(g),"onUpdate:modelValue":s[6]||(s[6]=l=>b(g)?g.value=l:null),page:i(w),"onUpdate:page":s[7]||(s[7]=l=>b(w)?w.value=l:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:i(f),"items-length":i(P),headers:r,class:"text-no-wrap","show-select":"","onUpdate:options":d},{"item.user":t(({item:l})=>[a("div",Je,[e(j,{size:"34",variant:l.avatar?void 0:"tonal",color:l.avatar?void 0:G(l.role).color},{default:t(()=>[l.avatar?(_(),B(De,{key:0,src:l.avatar},null,8,["src"])):(_(),A("span",Ke,U(("avatarText"in x?x.avatarText:i(ge))(l.fullName)),1))]),_:2},1032,["variant","color"]),a("div",Ye,[a("h6",Ze,[e(ie,{to:{name:"apps-user-view-id",params:{id:l.id}},class:"font-weight-medium text-link"},{default:t(()=>[$(U(l.fullName),1)]),_:2},1032,["to"])]),a("div",et,U(l.email),1)])])]),"item.role":t(({item:l})=>[a("div",tt,[e(S,{size:20,icon:G(l.role).icon,color:G(l.role).color},null,8,["icon","color"]),a("div",at,U(l.role),1)])]),"item.plan":t(({item:l})=>[a("div",lt,U(l.currentPlan),1)]),"item.status":t(({item:l})=>[e($e,{color:se(l.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[$(U(l.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:l})=>[e(K,{onClick:ot=>re(l.id)},{default:t(()=>[e(S,{icon:"bx-trash"})]),_:2},1032,["onClick"]),e(K,null,{default:t(()=>[e(S,{icon:"bx-show"})]),_:1}),e(O,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[e(S,{icon:"bx-dots-vertical-rounded"}),e(ke,{activator:"parent"},{default:t(()=>[e(Ce,null,{default:t(()=>[e(Z,{to:{name:"apps-user-view-id",params:{id:l.id}}},{prepend:t(()=>[e(S,{icon:"bx-show"})]),default:t(()=>[e(ee,null,{default:t(()=>s[9]||(s[9]=[$("View")])),_:1,__:[9]})]),_:2},1032,["to"]),e(Z,{link:""},{prepend:t(()=>[e(S,{icon:"bx-pencil"})]),default:t(()=>[e(ee,null,{default:t(()=>s[10]||(s[10]=[$("Edit")])),_:1,__:[10]})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[e(ue,{page:i(w),"onUpdate:page":s[4]||(s[4]=l=>b(w)?w.value=l:null),"items-per-page":i(n),"total-items":i(P)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1}),e(Ve,{"is-drawer-open":i(W),"onUpdate:isDrawerOpen":s[8]||(s[8]=l=>b(W)?W.value=l:null),onUserData:oe},null,8,["is-drawer-open"])])}}}),ia=q({__name:"index",setup(L){return(k,m)=>(_(),B(J,null,{default:t(()=>[e(M,{cols:"12"},{default:t(()=>m[0]||(m[0]=[a("h4",{class:"text-h4 mb-1"}," Roles List ",-1),a("p",{class:"text-body-1 mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1)])),_:1,__:[0]}),e(M,{cols:"12"},{default:t(()=>[e(Ge)]),_:1}),e(M,{cols:"12"},{default:t(()=>m[1]||(m[1]=[a("h4",{class:"text-h4 mb-1 mt-6"}," Total users with their roles ",-1),a("p",{class:"text-body-1 mb-0"}," Find all of your companyâ€™s administrator accounts and their associate roles. ",-1)])),_:1,__:[1]}),e(M,{cols:"12"},{default:t(()=>[e(st)]),_:1})]),_:1}))}});export{ia as default};
