var c=Object.defineProperty;var h=(a,t,e)=>t in a?c(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var n=(a,t,e)=>h(a,typeof t!="symbol"?t+"":t,e);import{d,h as r,b as s}from"./Http-D0rxl0mN.js";import{$ as l}from"./api-BtEIO2Pk.js";class v{constructor(t,e,o){n(this,"name");n(this,"loading");n(this,"loader");n(this,"locationStore");this.name=t,this.loading=e??{value:!1},this.loader=o,this.locationStore=d()}start(){this.locationStore.onCurrentLocationChange(this.loadSetting.bind(this))}saveSetting(t){const e=this.loading,o=this.locationStore.getCurrentLocation;typeof(o==null?void 0:o.id)=="string"&&(e.value=!0,l(`location/setting/value?locationReference=${o.id}`,{method:"PUT",body:{name:this.name,type:"object",value:t},onResponseError({response:i}){e.value=!1,r(i)}}).then(i=>{e.value=!1}).catch(i=>{e.value=!1,s(i)}))}loadSetting(){const t=this.loading,e=this.locationStore.getCurrentLocation;typeof(e==null?void 0:e.id)=="string"&&(t.value=!0,l(`location/setting/value?locationReference=${e.id}&name=${this.name}`,{method:"GET",onResponseError({response:o}){t.value=!1,r(o)}}).then(o=>{t.value=!1,this.loader(o)}).catch(o=>{t.value=!1,s(o)}))}isReady(){var t;return((t=this.locationStore)==null?void 0:t.getCurrentLocation)!==void 0}stop(){this.locationStore.offCurrentLocationChange(this.loadSetting.bind(this))}}export{v as L};
