import{$ as r}from"./TranslationUtil-CgiRFa6l.js";import{d as N,r as y,G as k,aj as B,g as F,f as n,o as b,b as l,e as S,t as p,v as u,m as s,ba as E,c as T,aW as j,F as D,i as I,ai as L}from"./index-B4trpNpq.js";import{_ as x}from"./AppTextField.vue_vue_type_script_setup_true_lang-pIjTq4xA.js";import{_ as G}from"./AppSelect.vue_vue_type_script_setup_true_lang-CVVTcUQA.js";import{c as H}from"./common-api.web.min-OIbk2-L5.js";import{a as W}from"./Http-ABHMdObA.js";import{L as X}from"./LocationSettingService-BouSSVU0.js";import{V as c,a as i}from"./VRow-BNRl9lqd.js";import{V as Y,a as q,c as z}from"./VCard-D0sq1ij7.js";import{V as J}from"./VCardText-DjVuD5I1.js";import{V as K}from"./VForm-CyEVP9HW.js";import{V as O}from"./VRangeSlider-dp7E9WYE.js";import{V as A}from"./VSpacer-Dpazx0v4.js";const P={class:"text-body-1 mb-0"},Q={class:"mx-2"},v=0,V=50,pe=N({__name:"setting-order-delivery-fee",setup(Z){var C;const $=((C=W().getCurrentAccount)==null?void 0:C.currency)??H.Api.HubriseCurrencyCode.EUR,R=[{id:"radius",name:"Radius"}],m=y("radius"),a=y([{range:[v,V],amount:0}]),h=y(!1),g=new X("delivery_fee",h,e=>{m.value=e.setting.type,a.value=e.setting.radiuses}),U=(e,d)=>{if(Array.isArray(d)){for(let t=e;t>0;t--)typeof a.value[t-1]=="object"&&(a.value[t-1].range[0]=Math.min(a.value[t-1].range[0],a.value[t].range[0]),a.value[t-1].range[1]=Math.max(a.value[t-1].range[0],a.value[t].range[0]));for(let t=e;t<a.value.length-1;t++)typeof a.value[t+1]=="object"&&(a.value[t+1].range[0]=Math.min(a.value[t+1].range[1],a.value[t].range[1]),a.value[t+1].range[1]=Math.max(a.value[t+1].range[1],a.value[t].range[1]));e===0&&d[0]>v?a.value[e].range[0]=v:e===a.value.length-1&&d[1]<V&&a.value.push({range:[d[1],V],amount:0})}},M=()=>{a.value=a.value.filter(e=>e.range[0]<e.range[1]).map(e=>(e.amount=Number(e.amount??0),e)),g.saveSetting({type:m.value,radiuses:a.value})};return k(()=>{g.start()}),B(()=>{g.stop()}),(e,d)=>{const t=G,w=x;return b(),F(c,null,{default:n(()=>[l(i,{cols:"12"},{default:n(()=>[l(Y,null,{default:n(()=>[l(q,null,{default:n(()=>[l(z,{class:"mb-1"},{default:n(()=>[p(u(("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.title")),1)]),_:1}),S("p",P,u(("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.subtitle")),1)]),_:1}),l(J,null,{default:n(()=>[l(K,{onSubmit:E(M,["prevent"])},{default:n(()=>[l(c,{class:"pt-6"},{default:n(()=>[l(i,{cols:"12",md:"4"},{default:n(()=>[l(t,{modelValue:s(m),"onUpdate:modelValue":d[0]||(d[0]=o=>j(m)?m.value=o:null),items:R,label:("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.field.type.label"),"item-title":"name","item-value":"id"},null,8,["modelValue","label"])]),_:1})]),_:1}),(b(!0),T(D,null,I(s(a),(o,_)=>(b(),F(c,{key:_},{default:n(()=>[l(i,{cols:"12",md:"1",sm:"1"},{default:n(()=>[p(u(("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.field.radius.label",{count:_+1})),1)]),_:2},1024),l(i,{class:"text-right",cols:"0",md:"1",sm:"1"},{default:n(()=>[p(u(("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.field.radius.distance",{distance:o.range[0]})),1)]),_:2},1024),l(i,{class:"d-inline-flex",cols:"12",md:"6",sm:"6"},{default:n(()=>[l(O,{modelValue:o.range,"onUpdate:modelValue":[f=>o.range=f,f=>U(_,f)],max:V,min:v,step:"0.1"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(i,{class:"text-left",cols:"0",md:"1",sm:"1"},{default:n(()=>[p(u(("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.field.radius.distance",{distance:o.range[1]})),1)]),_:2},1024),l(i,{class:"d-inline-flex",cols:"12",md:"3",sm:"3"},{default:n(()=>[l(A),l(w,{modelValue:o.amount,"onUpdate:modelValue":f=>o.amount=f,clearable:!1,label:("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.field.amount.label",{currency:s($)}),max:"50",min:"0",type:"number"},null,8,["modelValue","onUpdate:modelValue","label"]),S("span",Q,u(s($)),1)]),_:2},1024)]),_:2},1024))),128)),l(c,null,{default:n(()=>[l(i,{class:"d-flex flex-wrap gap-4",cols:"12"},{default:n(()=>[l(A),l(L,{disabled:!s(m)||s(a).length===0||!s(g).isReady(),loading:s(h),type:"submit"},{default:n(()=>[p(u(("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.button.save")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{pe as _};
