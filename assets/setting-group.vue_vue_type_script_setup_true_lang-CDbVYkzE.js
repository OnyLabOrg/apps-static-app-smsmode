import{_ as w}from"./AppSelect.vue_vue_type_script_setup_true_lang-CaSYQgE4.js";import{_ as A}from"./AppTextField.vue_vue_type_script_setup_true_lang-dLIQD95n.js";import{c as u}from"./common-api.web.min-CNoIadEv.js";import{V as _,a as i}from"./VRow-Ch4uDk95.js";import{d as I,r as O,X as x,G as P,c as R,b as t,e as d,f as l,m as c,ai as f,o as p,t as v,$ as G,F as L,i as N,g as y,l as S,v as r}from"./index-DZWVFJEj.js";import{V as H}from"./VCard-TCpTMKi2.js";import{V as $}from"./VCardText-C48XgJ5F.js";import{V as U}from"./VSwitch-FNjlSerJ.js";import{V as b}from"./VRangeSlider-BE0fE1RI.js";const B={class:"d-flex align-center justify-space-between"},D={class:"d-flex align-center justify-space-between mb-4"},M={class:"text-caption mb-1"},j={class:"text-caption mb-1"},F={class:"text-caption mb-1"},z={class:"pt-5 text-right"},ae=I({__name:"setting-group",setup(Y){const n=O([]),T=[{title:"Delivery",value:u.Api.HubriseServiceType.DELIVERY},{title:"Pickup",value:u.Api.HubriseServiceType.COLLECTION},{title:"Eat-In",value:u.Api.HubriseServiceType.EAT_IN}],h=()=>{n.value.length<10&&n.value.push({id:Date.now(),name:`group-${n.value.length+1}`,usePostalCodes:!1,postalCodes:"",orderCountRange:[0,1e3],totalSpentRange:[0,1e4],loyaltyPointsRange:[0,1e4],serviceTypes:[u.Api.HubriseServiceType.DELIVERY,u.Api.HubriseServiceType.COLLECTION,u.Api.HubriseServiceType.EAT_IN],smsOptIn:!0})},g=s=>{n.value.length>1&&(n.value=n.value.filter(o=>o.id!==s))},E=(s,o)=>!s||s.trim().length===0?"Group name is required":s.trim()!==s?"Group name cannot have leading or trailing spaces":/^[a-z0-9\-]+$/i.test(s)?n.value.find(V=>V.id!==o&&V.name.toLowerCase()===s.toLowerCase())?"A group with this name already exists":!0:"Only letters, numbers and dashes are allowed",C=x(()=>{const s={};return n.value.forEach(o=>{const m=E(o.name,o.id);m!==!0&&(s[o.id]=m)}),s}),k=x(()=>Object.keys(C.value).length===0);return P(()=>{h()}),(s,o)=>{const m=A,V=w;return p(),R("div",null,[t(_,null,{default:l(()=>[t(i,{cols:"12"},{default:l(()=>[d("div",B,[o[1]||(o[1]=d("div",null,[d("h6",{class:"text-h6 font-weight-medium"}," Customer Groups "),d("p",{class:"mb-0"}," Manage your customer groups for SMS campaigns ")],-1)),t(f,{disabled:c(n).length>=10,color:"primary",variant:"tonal",onClick:h},{default:l(()=>[t(G,{icon:"bx-plus",start:""}),o[0]||(o[0]=v(" Add Group "))]),_:1,__:[0]},8,["disabled"])])]),_:1}),t(i,{cols:"12"},{default:l(()=>[t(_,null,{default:l(()=>[(p(!0),R(L,null,N(c(n),e=>(p(),y(i,{key:e.id,cols:"12"},{default:l(()=>[t(H,{variant:"outlined"},{default:l(()=>[t($,null,{default:l(()=>[d("div",D,[t(m,{modelValue:e.name,"onUpdate:modelValue":a=>e.name=a,"error-messages":c(C)[e.id]||"",density:"compact",label:"Group Name",style:{"max-width":"200px"}},null,8,["modelValue","onUpdate:modelValue","error-messages"]),c(n).length>1?(p(),y(f,{key:0,color:"error",icon:"bx-trash",size:"small",variant:"text",onClick:a=>g(e.id)},null,8,["onClick"])):S("",!0)]),t(_,null,{default:l(()=>[t(i,{cols:"12",md:"4"},{default:l(()=>[t(U,{modelValue:e.usePostalCodes,"onUpdate:modelValue":a=>e.usePostalCodes=a,density:"compact","hide-details":"",label:"Restrict by postal codes"},null,8,["modelValue","onUpdate:modelValue"]),e.usePostalCodes?(p(),y(m,{key:0,modelValue:e.postalCodes,"onUpdate:modelValue":a=>e.postalCodes=a,class:"mt-2",density:"compact",label:"Postal codes (comma separated)",placeholder:"75001,75002,75003"},null,8,["modelValue","onUpdate:modelValue"])):S("",!0)]),_:2},1024),t(i,{cols:"12",md:"5"},{default:l(()=>[t(V,{modelValue:e.serviceTypes,"onUpdate:modelValue":a=>e.serviceTypes=a,items:T,chips:"","closable-chips":"",label:"Select service type",multiple:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(i,{cols:"12",md:"3"},{default:l(()=>[o[2]||(o[2]=d("div",{class:"text-caption mb-2"}," Marketing opt-in ",-1)),t(U,{modelValue:e.smsOptIn,"onUpdate:modelValue":a=>e.smsOptIn=a,density:"compact","hide-details":"",label:"SMS marketing"},null,8,["modelValue","onUpdate:modelValue"])]),_:2,__:[2]},1024),t(i,{cols:"12",md:"4"},{default:l(()=>[d("div",M," Order count: "+r(e.orderCountRange[0])+" - "+r(e.orderCountRange[1]),1),t(b,{modelValue:e.orderCountRange,"onUpdate:modelValue":a=>e.orderCountRange=a,max:1e3,min:0,step:"10","thumb-label":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(i,{cols:"12",md:"4"},{default:l(()=>[d("div",j," Total spent: "+r(e.totalSpentRange[0])+" EUR - "+r(e.totalSpentRange[1])+" EUR ",1),t(b,{modelValue:e.totalSpentRange,"onUpdate:modelValue":a=>e.totalSpentRange=a,max:1e4,min:0,step:"100","thumb-label":""},{"thumb-label":l(({modelValue:a})=>[v(r(a)+" EUR ",1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(i,{cols:"12",md:"4"},{default:l(()=>[d("div",F," Loyalty points: "+r(e.loyaltyPointsRange[0])+" - "+r(e.loyaltyPointsRange[1]),1),t(b,{modelValue:e.loyaltyPointsRange,"onUpdate:modelValue":a=>e.loyaltyPointsRange=a,max:1e4,min:0,step:"100","thumb-label":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),d("div",z,[t(f,{disabled:!c(k)},{default:l(()=>o[3]||(o[3]=[v(" Save ")])),_:1,__:[3]},8,["disabled"])])])}}});export{ae as _};
