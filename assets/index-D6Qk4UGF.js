import{f as Le}from"./formatters-Bnv68_Nh.js";import{d as ie,r as k,a as oe,g as R,o as f,f as t,b as e,e as s,m as l,aW as O,c as z,l as X,b9 as fe,t as b,ai as ee,$ as u,w as ge,X as q,F as A,i as N,q as ve,v as h,u as _e,J,K as W,ba as H,x as Z,bb as Te,I as De}from"./index-CH8kNowV.js";import{C as pe}from"./vue3-perfect-scrollbar-CdXtvrte.js";import{_ as ye}from"./TiptapEditor.vue_vue_type_style_index_0_lang-J7SGWWv6.js";import{V as Y}from"./VCard-DRKTYnd3.js";import{V as K}from"./VSpacer-AeXGyuiO.js";import{V as G}from"./VCardText-D4xbnkdK.js";import{V as Q}from"./VTextField-CcG7RTGl.js";import{V as F}from"./VDivider-CBJPQ-Nw.js";import{V as he}from"./VChip-B0cU-oya.js";import{$ as xe}from"./api-CJxDoypJ.js";import{V as $e}from"./VNavigationDrawer-BrsxS4x9.js";import{V as U}from"./VTooltip-CbPwIm9c.js";import{V as te}from"./VMenu-DrY-VwjJ.js";import{V as ae,a as le,b as se}from"./VList-B0CsY5vv.js";import{V as ke}from"./VBadge-CDqh-gc2.js";import{V as Ce}from"./VAvatar-Bfne1_Cm.js";import{V as de}from"./VImg-kq4JjoOP.js";import{u as Ae,V as Re,a as Ie}from"./VMain-o_yOX3aw.js";import{u as Ue}from"./useApi-BGhm6T7E.js";import{c as Be}from"./createUrl-D76fbGmV.js";import{V as be}from"./VCheckbox-6fSj4pdo.js";import"./helpers-BGv4x_9E.js";import"./index-BLkNr2qY.js";import"./index-DyyhO-O4.js";/* empty css              *//* empty css                   */import"./VCounter-B01K0t8f.js";import"./transition-BPaD_Yn2.js";import"./VField-C5r-5n9D.js";import"./form-026c-72C.js";import"./easing-Bybner-F.js";import"./VInput-BcExbrvz.js";import"./forwardRefs-C-GTDzx5.js";import"./index-BUpOgCMW.js";import"./VSlideGroup-J2mJ2KND.js";import"./index-CvOPxmL5.js";import"./delay-BbqhxiqH.js";import"./scopeId-DO3lrn96.js";import"./ssrBoot-DpApvclS.js";import"./VOverlay-Cllyhr2a.js";import"./lazy-DkYd9Lh9.js";import"./dialog-transition-hTwelW81.js";import"./VCheckboxBtn-DzZLZdmX.js";import"./VSelectionControl-3iS6X9YK.js";const Ne={class:"d-flex align-center"},Fe={class:"d-flex align-center gap-x-2"},Pe={class:"px-1 pe-6 py-1"},Oe={class:"cursor-pointer text-body-1"},je={key:0},qe={class:"px-1 pe-6 py-1"},He={key:0},Je={class:"px-1 pe-6 py-1"},We={class:"px-1 pe-6 py-1"},Ke={class:"d-flex align-center px-6 py-4"},Xe=ie({__name:"ComposeDialog",emits:["close"],setup(L){const C=k(""),d=k(""),V=k(""),$=k(""),E=k(""),S=k(""),B=k(!1),m=k(!1),g=()=>{d.value=V.value=$.value=""};return(x,i)=>{const M=oe("IconBtn"),T=ye;return f(),R(Y,{class:"email-compose-dialog","max-width":"30vw"},{default:t(()=>[e(G,{class:"py-3 px-6",style:{"background-color":`rgba(
          var(--v-theme-on-surface),
          var(--v-hover-opacity)
        )`}},{default:t(()=>[s("div",Ne,[i[11]||(i[11]=s("h5",{class:"text-h5 text-medium-emphasis"}," Compose Mail ",-1)),e(K),s("div",Fe,[e(M,{size:"small",icon:"bx-minus",onClick:i[0]||(i[0]=r=>x.$emit("close"))}),e(M,{size:"small",icon:"bx-x",onClick:i[1]||(i[1]=r=>{x.$emit("close"),g()})})])])]),_:1}),s("div",Pe,[e(Q,{modelValue:l(d),"onUpdate:modelValue":i[4]||(i[4]=r=>O(d)?d.value=r:null),density:"compact"},{"prepend-inner":t(()=>i[12]||(i[12]=[s("div",{class:"text-base font-weight-medium text-disabled"}," To: ",-1)])),append:t(()=>[s("span",Oe,[s("span",{onClick:i[2]||(i[2]=r=>B.value=!l(B))},"Cc"),i[13]||(i[13]=s("span",null," | ",-1)),s("span",{onClick:i[3]||(i[3]=r=>m.value=!l(m))},"Bcc")])]),_:1},8,["modelValue"])]),e(fe,null,{default:t(()=>[l(B)?(f(),z("div",je,[e(F),s("div",qe,[e(Q,{modelValue:l(E),"onUpdate:modelValue":i[5]||(i[5]=r=>O(E)?E.value=r:null),density:"compact"},{"prepend-inner":t(()=>i[14]||(i[14]=[s("div",{class:"text-disabled font-weight-medium"}," Cc: ",-1)])),_:1},8,["modelValue"])])])):X("",!0)]),_:1}),e(fe,null,{default:t(()=>[l(m)?(f(),z("div",He,[e(F),s("div",Je,[e(Q,{modelValue:l(S),"onUpdate:modelValue":i[6]||(i[6]=r=>O(S)?S.value=r:null),density:"compact"},{"prepend-inner":t(()=>i[15]||(i[15]=[s("div",{class:"text-disabled font-weight-medium"}," Bcc: ",-1)])),_:1},8,["modelValue"])])])):X("",!0)]),_:1}),e(F),s("div",We,[e(Q,{modelValue:l(V),"onUpdate:modelValue":i[7]||(i[7]=r=>O(V)?V.value=r:null),density:"compact"},{"prepend-inner":t(()=>i[16]||(i[16]=[s("div",{class:"text-base font-weight-medium text-disabled"}," Subject: ",-1)])),_:1},8,["modelValue"])]),e(F),e(T,{modelValue:l(C),"onUpdate:modelValue":i[8]||(i[8]=r=>O(C)?C.value=r:null),placeholder:"Message"},null,8,["modelValue"]),s("div",Ke,[e(ee,{color:"primary",class:"me-4","append-icon":"bx-paper-plane",disabled:l(d)==="",onClick:i[9]||(i[9]=r=>{x.$emit("close"),C.value="",g()})},{default:t(()=>i[17]||(i[17]=[b(" send ")])),_:1,__:[17]},8,["disabled"]),e(M,{size:"small"},{default:t(()=>[e(u,{icon:"bx-paperclip"})]),_:1}),e(K),e(M,{size:"small",class:"me-2"},{default:t(()=>[e(u,{icon:"bx-dots-vertical-rounded"})]),_:1}),e(M,{size:"small",onClick:i[10]||(i[10]=r=>{x.$emit("close"),g(),C.value=""})},{default:t(()=>[e(u,{icon:"bx-trash"})]),_:1})])]),_:1})}}}),Ge={class:"d-flex flex-column h-100"},Qe={class:"pa-6"},Ye={class:"email-filters py-4"},Ze=["href","onClick"],et={class:"text-base"},tt={class:"email-labels py-4"},at=["href","onClick"],lt={class:"text-body-1 text-high-emphasis"},st=ie({inheritAttrs:!1,__name:"EmailLeftSidebarContent",props:{emailsMeta:{}},emits:["toggleComposeDialogVisibility"],setup(L){const C=L,d=k(0),V=k(0),$=k(0),E=k(0);ge(()=>C.emailsMeta,m=>{m&&(d.value=m.inbox,V.value=m.draft,$.value=m.spam,E.value=m.star)},{immediate:!0,deep:!0});const S=q(()=>[{title:"Inbox",prependIcon:"bx-envelope",to:{name:"apps-email"},badge:{content:d.value,color:"primary"}},{title:"Sent",prependIcon:"bx-send",to:{name:"apps-email-filter",params:{filter:"sent"}}},{title:"Draft",prependIcon:"bx-edit",to:{name:"apps-email-filter",params:{filter:"draft"}},badge:{content:V.value,color:"warning"}},{title:"Starred",prependIcon:"bx-star",to:{name:"apps-email-filter",params:{filter:"starred"}},badge:{content:E.value,color:"success"}},{title:"Spam",prependIcon:"bx-error-alt",to:{name:"apps-email-filter",params:{filter:"spam"}},badge:{content:$.value,color:"error"}},{title:"Trash",prependIcon:"bx-trash",to:{name:"apps-email-filter",params:{filter:"trashed"}}}]),B=[{title:"Personal",color:"success",to:{name:"apps-email-label",params:{label:"personal"}}},{title:"Company",color:"primary",to:{name:"apps-email-label",params:{label:"company"}}},{title:"Important",color:"warning",to:{name:"apps-email-label",params:{label:"important"}}},{title:"Private",color:"error",to:{name:"apps-email-label",params:{label:"private"}}}];return(m,g)=>{const x=oe("RouterLink");return f(),z("div",Ge,[s("div",Qe,[e(ee,{block:"",onClick:g[0]||(g[0]=i=>m.$emit("toggleComposeDialogVisibility"))},{default:t(()=>g[1]||(g[1]=[b(" Compose ")])),_:1,__:[1]})]),e(l(pe),{options:{wheelPropagation:!1},class:"h-100"},{default:t(()=>[s("ul",Ye,[(f(!0),z(A,null,N(l(S),i=>(f(),R(x,{key:i.title,class:"d-flex align-center cursor-pointer align-center",to:i.to,custom:""},{default:t(({isActive:M,href:T,navigate:r})=>{var _;return[s("li",ve({ref_for:!0},m.$attrs,{href:T,class:[M&&"email-filter-active text-primary","d-flex align-center cursor-pointer"],onClick:r}),[e(u,{icon:i.prependIcon,class:"me-2",size:"20"},null,8,["icon"]),s("div",et,h(i.title),1),e(K),(_=i.badge)!=null&&_.content?(f(),R(he,{key:0,color:i.badge.color,label:"",size:"small",class:"rounded-xl px-3"},{default:t(()=>{var n;return[b(h((n=i.badge)==null?void 0:n.content),1)]}),_:2},1032,["color"])):X("",!0)],16,Ze)]}),_:2},1032,["to"]))),128))]),s("ul",tt,[g[2]||(g[2]=s("div",{class:"text-caption text-disabled mb-4 px-6"}," LABELS ",-1)),(f(),z(A,null,N(B,i=>e(x,{key:i.title,class:"d-flex align-center",to:i.to,custom:""},{default:t(({isActive:M,href:T,navigate:r})=>[s("li",ve({ref_for:!0},m.$attrs,{href:T,class:[M&&"email-label-active text-primary","cursor-pointer d-flex align-center"],onClick:r}),[e(u,{icon:"bx-bxs-circle",color:i.color,class:"me-2",size:"10"},null,8,["color"]),s("div",lt,h(i.title),1)],16,at)]),_:2},1032,["to"])),64))])]),_:1})])}}}),me=()=>{const L=_e(),C=async(m,g)=>{await xe("apps/email",{method:"POST",body:JSON.stringify({ids:m,data:g})})};return{labels:[{title:"personal",color:"success"},{title:"company",color:"primary"},{title:"important",color:"warning"},{title:"private",color:"error"}],resolveLabelColor:m=>m==="personal"?"success":m==="company"?"primary":m==="important"?"warning":m==="private"?"error":"secondary",shallShowMoveToActionFor:m=>m==="trash"?L.params.filter!=="trashed":m==="inbox"?!(L.params.filter===void 0||L.params.filter==="sent"||L.params.filter==="draft"):m==="spam"?!(L.params.filter==="spam"||L.params.filter==="sent"||L.params.filter==="draft"):!1,emailMoveToFolderActions:[{action:"inbox",icon:"bx-mail"},{action:"spam",icon:"bx-error-alt"},{action:"trash",icon:"bx-trash"}],moveSelectedEmailTo:async(m,g)=>{const x={};m==="inbox"?(L.params.filter==="trashed"&&(x.isDeleted=!1),x.folder="inbox"):m==="spam"?(L.params.filter==="trashed"&&(x.isDeleted=!1),x.folder="spam"):m==="trash"&&(x.isDeleted=!0),await C(g,x)},updateEmails:C,updateEmailLabels:async(m,g)=>{await xe("/apps/email",{method:"POST",body:{ids:m,label:g}})}}},it={class:"email-view-header d-flex align-center px-6 py-4"},ot={class:"d-flex align-center flex-wrap flex-grow-1 overflow-hidden gap-2"},nt={class:"text-body-1 text-high-emphasis text-truncate"},rt={class:"d-flex flex-wrap gap-2"},dt={class:"d-flex align-center gap-1"},mt={class:"email-view-action-bar d-flex align-center text-medium-emphasis ps-6 pe-4 gap-x-1"},pt={class:"d-flex align-center gap-x-1"},ut={class:"d-flex align-start align-sm-center pa-6 gap-x-4"},ct={class:"d-flex flex-wrap flex-grow-1 overflow-hidden"},ft={class:"text-truncate"},vt={class:"text-body-1 font-weight-medium text-high-emphasis text-truncate"},xt={class:"text-sm"},bt={class:"d-flex align-center gap-x-4"},gt={class:"text-disabled text-base"},_t={class:"text-body-1 font-weight-medium text-truncate mb-4"},yt=["innerHTML"],ht={class:"text-base"},$t={class:"text-body-1 text-high-emphasis mb-6"},kt={class:"d-flex justify-end gap-4 pt-2 flex-wrap"},Ct=ie({__name:"EmailView",props:{email:{},emailMeta:{}},emits:["refresh","navigated","close","trash","unread","read","star","unstar"],setup(L,{emit:C}){const d=L,V=C,$=k(""),E=k(!1),S=k(!0),{updateEmailLabels:B}=me(),{labels:m,resolveLabelColor:g,emailMoveToFolderActions:x,shallShowMoveToActionFor:i,moveSelectedEmailTo:M}=me(),T=async _=>{await M(_,[d.email.id]),V("refresh"),V("close")},r=async _=>{await B([d.email.id],_),V("refresh")};return(_,n)=>{const v=oe("IconBtn"),ne=ye;return f(),R($e,{temporary:"","model-value":!!d.email,location:"right",scrim:!1,floating:"",class:"email-view"},{default:t(()=>[d.email?(f(),z(A,{key:0},[s("div",it,[e(v,{class:"me-2",onClick:n[0]||(n[0]=c=>{_.$emit("close"),E.value=!1,S.value=!0,$.value=""})},{default:t(()=>[e(u,{size:"22",icon:"bx-chevron-left",class:"flip-in-rtl text-medium-emphasis"})]),_:1}),s("div",ot,[s("div",nt,h(d.email.subject),1),s("div",rt,[(f(!0),z(A,null,N(d.email.labels,c=>(f(),R(he,{key:c,color:l(g)(c),class:"text-capitalize flex-shrink-0",size:"small"},{default:t(()=>[b(h(c),1)]),_:2},1032,["color"]))),128))])]),s("div",null,[s("div",dt,[e(v,{disabled:!d.emailMeta.hasPreviousEmail,onClick:n[1]||(n[1]=c=>_.$emit("navigated","previous"))},{default:t(()=>[e(u,{icon:"bx-chevron-left",class:"flip-in-rtl text-medium-emphasis"})]),_:1},8,["disabled"]),e(v,{disabled:!d.emailMeta.hasNextEmail,onClick:n[2]||(n[2]=c=>_.$emit("navigated","next"))},{default:t(()=>[e(u,{icon:"bx-chevron-right",class:"flip-in-rtl text-medium-emphasis"})]),_:1},8,["disabled"])])])]),e(F),s("div",mt,[J(e(v,{onClick:n[3]||(n[3]=c=>{_.$emit("trash"),_.$emit("close")})},{default:t(()=>[e(u,{icon:"bx-trash",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>n[9]||(n[9]=[b(" Delete Mail ")])),_:1,__:[9]})]),_:1},512),[[W,!d.email.isDeleted]]),e(v,{onClick:n[4]||(n[4]=H(c=>{_.$emit("unread"),_.$emit("close")},["stop"]))},{default:t(()=>[e(u,{icon:"bx-envelope",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>n[10]||(n[10]=[b(" Mark as Unread ")])),_:1,__:[10]})]),_:1}),e(v,null,{default:t(()=>[e(u,{icon:"bx-folder",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>n[11]||(n[11]=[b(" Move to ")])),_:1,__:[11]}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(f(!0),z(A,null,N(l(x),c=>(f(),R(le,{key:c.title,class:Z([l(i)(c.action)?"d-flex":"d-none","align-center"]),href:"#",onClick:I=>T(c.action)},{prepend:t(()=>[e(u,{icon:c.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:t(()=>[e(se,{class:"text-capitalize"},{default:t(()=>[b(h(c.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(u,{icon:"bx-label",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>n[12]||(n[12]=[b(" Label ")])),_:1,__:[12]}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(f(!0),z(A,null,N(l(m),c=>(f(),R(le,{key:c.title,href:"#",onClick:H(I=>r(c.title),["stop"])},{prepend:t(()=>[e(ke,{inline:"",color:l(g)(c.title),dot:""},null,8,["color"])]),default:t(()=>[e(se,{class:"ms-2 text-capitalize"},{default:t(()=>[b(h(c.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(K),s("div",pt,[e(v,{color:d.email.isStarred?"warning":"default",onClick:n[5]||(n[5]=c=>{var I;(I=d.email)!=null&&I.isStarred?_.$emit("unstar"):_.$emit("star"),_.$emit("refresh")})},{default:t(()=>[e(u,{icon:d.email.isStarred?"bx-bxs-star":"bx-star",size:"22"},null,8,["icon"])]),_:1},8,["color"]),e(v,null,{default:t(()=>[e(u,{icon:"bx-dots-vertical-rounded",size:"22"})]),_:1})])]),e(F),e(l(pe),{tag:"div",class:"mail-content-container flex-grow-1 pa-sm-12 pa-6",options:{wheelPropagation:!1}},{default:t(()=>[e(Y,{class:"mb-4"},{default:t(()=>[s("div",ut,[e(Ce,{size:"38"},{default:t(()=>[e(de,{src:d.email.from.avatar,alt:d.email.from.name},null,8,["src","alt"])]),_:1}),s("div",ct,[s("div",ft,[s("div",vt,h(d.email.from.name),1),s("div",xt,h(d.email.from.email),1)]),e(K),s("div",bt,[s("div",gt,h(new Date(d.email.time).toDateString()),1),s("div",null,[J(e(v,null,{default:t(()=>[e(u,{icon:"bx-paperclip",size:"22"})]),_:1},512),[[W,d.email.attachments.length]]),e(v,null,{default:t(()=>[e(u,{icon:"bx-dots-vertical-rounded",size:"22"})]),_:1})])])])]),e(F),e(G,null,{default:t(()=>[s("div",_t,h(d.email.from.name)+", ",1),s("div",{class:"text-base",innerHTML:d.email.message},null,8,yt)]),_:1}),d.email.attachments.length?(f(),z(A,{key:0},[e(F),e(G,{class:"d-flex flex-column gap-y-4 pt-4"},{default:t(()=>[n[13]||(n[13]=s("span",null,"2 Attachments",-1)),(f(!0),z(A,null,N(d.email.attachments,c=>(f(),z("div",{key:c.fileName,class:"d-flex align-center"},[e(de,{src:c.thumbnail,alt:c.fileName,"aspect-ratio":"1","max-height":"24","max-width":"24",class:"me-2"},null,8,["src","alt"]),s("span",null,h(c.fileName),1)]))),128))]),_:1,__:[13]})],64)):X("",!0)]),_:1}),J(e(Y,null,{default:t(()=>[e(G,{class:"font-weight-medium text-high-emphasis"},{default:t(()=>[s("div",ht,[n[14]||(n[14]=b(" Click here to ")),s("span",{class:"text-primary cursor-pointer",onClick:n[6]||(n[6]=c=>{E.value=!l(E),S.value=!l(S)})}," Reply "),n[15]||(n[15]=b(" or ")),n[16]||(n[16]=s("span",{class:"text-primary cursor-pointer"}," Forward ",-1))])]),_:1})]),_:1},512),[[W,l(S)]]),l(E)?(f(),R(Y,{key:0},{default:t(()=>[e(G,null,{default:t(()=>{var c;return[s("div",$t," Reply to "+h((c=_.email)==null?void 0:c.from.name),1),e(ne,{modelValue:l($),"onUpdate:modelValue":n[7]||(n[7]=I=>O($)?$.value=I:null),placeholder:"Write your message...","is-divider":!1},null,8,["modelValue"]),s("div",kt,[e(v,{icon:"bx-trash",onClick:n[8]||(n[8]=I=>{E.value=!l(E),S.value=!l(S),$.value=""})}),e(ee,{variant:"text",color:"secondary"},{prepend:t(()=>[e(u,{icon:"bx-paperclip",color:"secondary",size:"16"})]),default:t(()=>[n[17]||(n[17]=b(" Attachments "))]),_:1,__:[17]}),e(ee,{"append-icon":"bx-paper-plane"},{default:t(()=>n[18]||(n[18]=[b(" Send ")])),_:1,__:[18]})])]}),_:1})]),_:1})):X("",!0)]),_:1})],64)):X("",!0)]),_:1},8,["model-value"])}}}),Vt={class:"d-flex align-center"},wt={class:"py-2 px-4 d-flex align-center d-flex gap-x-1"},zt=["onClick"],Et={class:"text-h6"},St={class:"text-body-2 truncate"},Mt={class:"text-sm text-disabled"},Lt={class:"email-actions d-none"},Tt={class:"py-4 px-5 text-center"},Ca=ie({__name:"index",async setup(L){let C,d;const{isLeftSidebarOpen:V}=Ae(),$=_e(),{labels:E,resolveLabelColor:S,emailMoveToFolderActions:B,shallShowMoveToActionFor:m,moveSelectedEmailTo:g,updateEmails:x,updateEmailLabels:i}=me(),M=k(!1),T=k(""),r=k([]),{data:_,execute:n}=([C,d]=Te(()=>Ue(Be("/apps/email",{query:{q:T,filter:()=>"filter"in $.params?$.params.filter:void 0,label:()=>"label"in $.params?$.params.label:void 0}}))),C=await C,d(),C),v=q(()=>_.value.emails),ne=q(()=>_.value.emailsMeta),c=p=>{const a=r.value.indexOf(p);a===-1?r.value.push(p):r.value.splice(a,1)},I=q(()=>v.value.length&&v.value.length===r.value.length),ue=q(()=>!!r.value.length&&v.value.length!==r.value.length),re=q(()=>r.value.every(p=>{var a;return(a=v.value.find(w=>w.id===p))==null?void 0:a.isRead})),Ve=()=>{r.value=I.value?[]:v.value.map(p=>p.id)},y=k(null),we=q(()=>{const p={hasNextEmail:!1,hasPreviousEmail:!1};if(y.value){const a=v.value.findIndex(w=>{var o;return w.id===((o=y.value)==null?void 0:o.id)});p.hasNextEmail=!!v.value[a+1],p.hasPreviousEmail=!!v.value[a-1]}return p}),ce=async()=>{await n(),y.value&&(y.value=v.value.find(p=>{var a;return p.id===((a=y.value)==null?void 0:a.id)}))},D=async(p,a=r.value)=>{r.value=[],r.value=[],a.length&&(p==="trash"?await x(a,{isDeleted:!0}):p==="spam"?await x(a,{folder:"spam"}):p==="unread"?await x(a,{isRead:!1}):p==="read"?await x(a,{isRead:!0}):p==="star"?await x(a,{isStarred:!0}):p==="unstar"&&await x(a,{isStarred:!1}),y.value?ce():await n())},ze=async p=>{await g(p,r.value),await n()},Ee=async p=>{await i(r.value,p),await n()},Se=p=>{if(!y.value)return;const a=v.value.findIndex(o=>{var j;return o.id===((j=y.value)==null?void 0:j.id)}),w=p==="previous"?a-1:a+1;y.value=v.value[w]},Me=async p=>{y.value=p,await D("read",[p.id])};return ge(()=>$.params,()=>{r.value=[]},{deep:!0}),(p,a)=>{const w=oe("IconBtn");return f(),R(Re,{style:{"z-index":"0","min-block-size":"100%"},class:"email-app-layout"},{default:t(()=>[e($e,{modelValue:l(V),"onUpdate:modelValue":a[1]||(a[1]=o=>O(V)?V.value=o:null),"data-allow-mismatch":"",absolute:"",touchless:"",location:"start",temporary:p.$vuetify.display.mdAndDown},{default:t(()=>[e(st,{"emails-meta":l(ne),onToggleComposeDialogVisibility:a[0]||(a[0]=o=>M.value=!l(M))},null,8,["emails-meta"])]),_:1},8,["modelValue","temporary"]),e(Ct,{email:l(y),"email-meta":l(we),onRefresh:ce,onNavigated:Se,onClose:a[2]||(a[2]=o=>y.value=null),onTrash:a[3]||(a[3]=o=>D("trash",l(y)?[l(y).id]:[])),onUnread:a[4]||(a[4]=o=>D("unread",l(y)?[l(y).id]:[])),onStar:a[5]||(a[5]=o=>D("star",l(y)?[l(y).id]:[])),onUnstar:a[6]||(a[6]=o=>D("unstar",l(y)?[l(y).id]:[]))},null,8,["email","email-meta"]),e(Ie,null,{default:t(()=>[e(Y,{flat:"",class:"email-content-list h-100 d-flex flex-column"},{default:t(()=>[s("div",Vt,[e(w,{class:"d-lg-none ms-3",onClick:a[7]||(a[7]=o=>V.value=!0)},{default:t(()=>[e(u,{icon:"bx-menu"})]),_:1}),e(Q,{modelValue:l(T),"onUpdate:modelValue":a[8]||(a[8]=o=>O(T)?T.value=o:null),density:"default",class:"email-search px-sm-2 flex-grow-1 py-1",placeholder:"Search mail"},{"prepend-inner":t(()=>[e(u,{icon:"bx-search",size:"22",class:"me-2 text-medium-emphasis"})]),_:1},8,["modelValue"])]),e(F),s("div",wt,[e(be,{"model-value":l(I),indeterminate:l(ue),class:"d-flex","onUpdate:modelValue":Ve},null,8,["model-value","indeterminate"]),s("div",{class:"w-100 d-flex align-center action-bar-actions gap-x-1",style:De({visibility:l(ue)||l(I)?void 0:"hidden"})},[J(e(w,{onClick:a[9]||(a[9]=o=>D("trash"))},{default:t(()=>[e(u,{icon:"bx-trash",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>a[13]||(a[13]=[b(" Delete Mail ")])),_:1,__:[13]})]),_:1},512),[[W,"filter"in l($).params?l($).params.filter!=="trashed":!0]]),e(w,{onClick:a[10]||(a[10]=o=>l(re)?D("unread"):D("read"))},{default:t(()=>[e(u,{icon:l(re)?"bx-envelope":"bx-envelope-open",size:"22"},null,8,["icon"]),e(U,{activator:"parent",location:"top"},{default:t(()=>[b(h(l(re)?"Mark as Unread":"Mark as Read"),1)]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(u,{icon:"bx-folder",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>a[14]||(a[14]=[b(" Folder ")])),_:1,__:[14]}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(f(!0),z(A,null,N(l(B),o=>(f(),R(le,{key:o.title,class:Z([l(m)(o.action)?"d-flex":"d-none","items-center"]),href:"#",onClick:j=>ze(o.action)},{prepend:t(()=>[e(u,{icon:o.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:t(()=>[e(se,{class:"text-capitalize"},{default:t(()=>[b(h(o.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(u,{icon:"bx-label",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>a[15]||(a[15]=[b(" Label ")])),_:1,__:[15]}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(f(!0),z(A,null,N(l(E),o=>(f(),R(le,{key:o.title,href:"#",onClick:j=>Ee(o.title)},{prepend:t(()=>[e(ke,{inline:"",color:l(S)(o.title),dot:""},null,8,["color"])]),default:t(()=>[e(se,{class:"ms-2 text-capitalize"},{default:t(()=>[b(h(o.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})],4),e(K),e(w,{onClick:l(n)},{default:t(()=>[e(u,{icon:"bx-refresh",size:"22"})]),_:1},8,["onClick"]),e(w,null,{default:t(()=>[e(u,{icon:"bx-dots-vertical-rounded",size:"22"})]),_:1})]),e(F),e(l(pe),{tag:"ul",options:{wheelPropagation:!1},class:"email-list"},{default:t(()=>[(f(!0),z(A,null,N(l(v),o=>{var j;return J((f(),z("li",{key:o.id,class:Z(["email-item d-flex align-center pa-4 gap-2 cursor-pointer",[{"email-read":o.isRead}]]),onClick:P=>Me(o)},[e(be,{"model-value":l(r).includes(o.id),class:"flex-shrink-0","onUpdate:modelValue":P=>c(o.id),onClick:a[11]||(a[11]=H(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"]),e(w,{color:o.isStarred?"warning":"default",onClick:H(P=>D(o.isStarred?"unstar":"star",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:"bx-star",size:"22"})]),_:2},1032,["color","onClick"]),e(Ce,{size:"32"},{default:t(()=>[e(de,{src:o.from.avatar,alt:o.from.name},null,8,["src","alt"])]),_:2},1024),s("h6",Et,h(o.from.name),1),s("span",St,h(o.subject),1),e(K),s("div",{class:Z(["email-meta align-center gap-2",p.$vuetify.display.xs?"d-none":""])},[(f(!0),z(A,null,N(o.labels,P=>(f(),R(u,{key:P,icon:"bx-bxs-circle",size:"8",color:l(S)(P)},null,8,["color"]))),128)),s("span",Mt,h(("formatDateToMonthShort"in p?p.formatDateToMonthShort:l(Le))(o.time)),1)],2),s("div",Lt,[e(w,{onClick:H(P=>D("trash",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:"bx-trash",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>a[16]||(a[16]=[b(" Delete Mail ")])),_:1,__:[16]})]),_:2},1032,["onClick"]),e(w,{class:"mx-1",onClick:H(P=>D(o.isRead?"unread":"read",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:o.isRead?"bx-envelope":"bx-envelope-open",size:"22"},null,8,["icon"]),e(U,{activator:"parent",location:"top"},{default:t(()=>[b(h(o.isRead?"Mark as Unread":"Mark as Read"),1)]),_:2},1024)]),_:2},1032,["onClick"]),e(w,{onClick:H(P=>D("spam",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:"bx-info-circle",size:"22"}),e(U,{activator:"parent",location:"top"},{default:t(()=>a[17]||(a[17]=[b(" Move to Spam ")])),_:1,__:[17]})]),_:2},1032,["onClick"])])],10,zt)),[[W,(j=l(v))==null?void 0:j.length]])}),128)),J(s("li",Tt,a[18]||(a[18]=[s("span",{class:"text-high-emphasis"},"No items found.",-1)]),512),[[W,!l(v).length]])]),_:1})]),_:1}),J(e(Xe,{onClose:a[12]||(a[12]=o=>M.value=!1)},null,512),[[W,l(M)]])]),_:1})]),_:1})}}});export{Ca as default};
